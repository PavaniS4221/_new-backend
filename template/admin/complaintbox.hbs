<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Complaint Management</title>
    <link rel="stylesheet" href="/admin/complaintbox.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style></style>
  </head>
  <body>
    <nav class="navbar">
      <img src="../images/nmit-logo.svg" alt="NITTE Logo" class="logo" />
      <div class="profile-region"></div>
      <div class="nav-icons">
        <a href="/admin/index" class="breadcrumb-link">Home</a>
        <a href="/admin/notification" id="notification-bell">
          <i class="fas fa-bell"></i>
          <span class="notification-count" id="notification-count">0</span>
        </a>
        <a href="/admin/view-profile">
          <i class="fas fa-user"></i>
        </a>
      </div>
    </nav>

    <div class="sidebar">
      <a href="#complaints" onclick="showComplaints()">List of Complaints</a>
      <a href="#solved" onclick="showSolvedComplaints()">Solved Complaints</a>
      <a href="#unsolved" onclick="showUnsolvedComplaints()">Unsolved Complaints</a>
    </div>
    <div class="content">
      <div id="complaints-section">
        <div class="search-bar">
          <input
            type="text"
            placeholder="Search Complaint..."
            id="search-input"
          />
          <button onclick="openAddComplaintPopup()">+</button>
        </div>
        <h3>Complaints List</h3>
        <table>
          <thead>
            <tr>
              <th>S.No</th>
              <th>Complaint Topic</th>
              <th>Date</th>
              <th>Bus No</th>
              <th>Route No</th>
              <th>Driver Name</th>
              <th>Complainant</th>
              <th>Complaint Details</th>
              <th>View</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="complaintTable">
            <tr>
              <td>1</td>
              <td>Late Arrival</td>
              <td>2025-02-20</td>
              <td>123</td>
              <td>45</td>
              <td>John Doe</td>
              <td>Jane Smith</td>
              <td>Bus arrived 30 minutes late.</td>
              <td>
                <span class="status-btn" onclick="viewComplaint(this)"><i
                    class="fas fa-eye"
                  ></i></span>
              </td>
              <td>
                <button class="accept" onclick="markAsSolved(this)">
                  Solved
                </button>
                <button class="reject" onclick="markAsUnsolved(this)">
                  Unsolved
                </button>
                <button class="delete" onclick="deleteComplaint(this)">
                  Delete
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="solved-section" style="display: none">
        <h3>Solved Complaints</h3>
        <table>
          <thead>
            <tr>
              <th>S.No</th>
              <th>Complaint Topic</th>
              <th>Date</th>
              <th>Bus Number</th>
              <th>Route Number</th>
              <th>Driver Name</th>
              <th>Complainant</th>
              <th>Complaint Details</th>
            </tr>
          </thead>
          <tbody id="resolved-complaints">
            <!-- Resolved complaints will be dynamically generated here -->
          </tbody>
        </table>
      </div>
      <div id="unsolved-section" style="display: none">
        <h3>Unsolved Complaints</h3>
        <table>
          <thead>
            <tr>
              <th>S.No</th>
              <th>Complaint Topic</th>
              <th>Date</th>
              <th>Bus Number</th>
              <th>Route Number</th>
              <th>Driver Name</th>
              <th>Complainant</th>
              <th>Complaint Details</th>
            </tr>
          </thead>
          <tbody id="unresolved-complaints">
            <!-- Unresolved complaints will be dynamically generated here -->
          </tbody>
        </table>
      </div>
    </div>

    <div class="popup draggable" id="addComplaintPopup">
      <h2>Add New Complaint</h2>
      <div class="form-group">
        <label for="complaintTopic">Complaint Topic:</label>
        <input type="text" id="complaintTopic" />
      </div>
      <div class="form-group">
        <label for="complaintDate">Date:</label>
        <input type="date" id="complaintDate" />
      </div>
      <div class="form-group">
        <label for="busNo">Bus No:</label>
        <input type="text" id="busNo" />
      </div>
      <div class="form-group">
        <label for="routeNo">Route No:</label>
        <input type="text" id="routeNo" />
      </div>
      <div class="form-group">
        <label for="driverName">Driver Name:</label>
        <input type="text" id="driverName" />
      </div>
      <div class="form-group">
        <label for="complainant">Complainant:</label>
        <input type="text" id="complainant" />
      </div>
      <div class="form-group">
        <label for="complaintDetails">Complaint Details:</label>
        <textarea id="complaintDetails" rows="4"></textarea>
      </div>
      <div class="actions">
        <button class="send" onclick="submitComplaint()">Submit</button>
        <button class="close" onclick="closeAddComplaintPopup()">Close</button>
      </div>
    </div>

    <script src="/admin/js/complaintbox.js"></script>
  </body>
</html>