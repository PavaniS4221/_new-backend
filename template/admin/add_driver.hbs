<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Driver</title>
    <link rel="stylesheet" href="/admin/add_driver.css" />
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <style>

  </style>
  <body>
    <nav class="navbar">
      <img src="../images/nmit-logo.svg" alt="NITTE Logo" class="logo" />
      <div class="profile-region"></div>
      <div class="nav-icons">
        <a href="/admin/index" class="breadcrumb-link">Home</a><a
          href="/admin/admindashboard"
          class="breadcrumb-link"
        >Admin Dashboard</a>
      </div>
    </nav>

    <div class="container">
      <h1>Add Driver</h1>
      <form action="/admin/add_driver" method="POST" id="driver-form">
        <div class="form-group">
  <label for="driver-id">Driver ID:</label>
  <input
    type="text"
    class="form-control"
    id="driver-id"
    name="driver-id"
  readonly
  required
  />
</div>
        
        
        <div class="form-group">
          <label for="bus-number">Bus Number:</label>
          <input
            type="text"
            class="form-control"
            id="bus-number"
            name="bus-number"
            required
          />
        </div>
        <div class="form-group">
          <label for="route-number">Route Number:</label>
          <input
            type="text"
            class="form-control"
            id="route-number"
            name="route-number"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
    <script>
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    ></script>
    <script>
function generateDriverID() {
  const routeInput = document.getElementById("route-number");
  const driverIdInput = document.getElementById("driver-id");

  function createDriverID(routeNumber) {
    const randomDigits = Math.floor(1000 + Math.random() * 9000);
    return `NMITbus-${routeNumber}-${randomDigits}`;
  }

  function updateID() {
    const route = routeInput.value.trim();
    if (route) {
      driverIdInput.value = createDriverID(route);
    } else {
      driverIdInput.value = "";
    }
  }

  // update on input
  routeInput.addEventListener("input", updateID);

  // generate before submit
  const form = document.getElementById("driver-form");
  form.addEventListener("submit", (e) => {
    if (!driverIdInput.value) {
      updateID(); // generate if missing
    }
  });
}

window.onload = generateDriverID;
</script>

  </body>
</html>